!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Lightense=t():e.Lightense=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r(e,t,n[t])})}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=function(){"use strict";var e,t=window,r=document,o={time:300,padding:40,offset:40,keyboard:!0,cubicBezier:"cubic-bezier(.2, 0, .1, 1)",background:"rgba(255, 255, 255, .98)",zIndex:2147483647,beforeShow:void 0,afterShow:void 0,beforeHide:void 0,afterHide:void 0},a={};function c(e){var t=a[e];if(t){if("function"!=typeof t)throw"config.".concat(e," must be a function!");Reflect.apply(t,a,[a])}}function s(e){e.src&&!e.classList.contains("lightense-target")&&(e.classList.add("lightense-target"),e.addEventListener("click",function(i){if(a.keyboard&&(i.metaKey||i.ctrlKey))return t.open(e.src,"_blank");!function(e){if(a.target=e,a.target.classList.contains("lightense-open"))return u();var i,s,p;c("beforeShow"),a.scrollY=t.scrollY,i=a.target,s="transitionend",p=function(){c("afterShow")},i.addEventListener(s,function e(t){Reflect.apply(p,this,t),i.removeEventListener(s,e)});var b=new Image;b.onload=function(){!function(e){var n=e.width,i=e.height,c=t.pageYOffset||r.documentElement.scrollTop||0,s=t.pageXOffset||r.documentElement.scrollLeft||0,l=a.target.getBoundingClientRect(),d=n/l.width,u=t.innerWidth||r.documentElement.clientWidth||0,g=t.innerHeight||r.documentElement.clientHeight||0,f=a.target.getAttribute("data-lightense-padding")||a.target.getAttribute("data-padding")||a.padding,p=f<u?u-f:u-o.padding,b=f<g?g-f:g-o.padding,h=n/i,m=p/b;a.scaleFactor=n<p&&i<b?d:h<m?b/i*d:p/n*d;var y=u/2,v=c+g/2,k=l.left+s+l.width/2,w=l.top+c+l.height/2;a.translateX=Math.round(y-k),a.translateY=Math.round(v-w)}(this),function(){a.target.classList.add("lightense-open"),a.wrap=r.createElement("div"),a.wrap.className="lightense-wrap",setTimeout(function(){a.target.style.transform="scale("+a.scaleFactor+")"},20),a.target.parentNode.insertBefore(a.wrap,a.target),a.wrap.appendChild(a.target),setTimeout(function(){a.wrap.style.transform="translate3d("+a.translateX+"px, "+a.translateY+"px, 0)"},20);var e={cubicBezier:a.target.getAttribute("data-lightense-cubic-bezier")||a.cubicBezier,background:a.target.getAttribute("data-lightense-background")||a.target.getAttribute("data-background")||a.background,zIndex:a.target.getAttribute("data-lightense-z-index")||a.zIndex},t=n({},a,e);d("lightense-images-css-computed","\n    :root {\n      --lightense-z-index: ".concat(t.zIndex-1,";\n      --lightense-backdrop: ").concat(t.background,";\n      --lightense-duration: ").concat(t.time,"ms;\n      --lightense-timing-func: ").concat(t.cubicBezier,";\n      --lightense-backdrop-safari: ").concat(l(t.background),";\n    }")),a.container.style.visibility="visible",setTimeout(function(){a.container.style.opacity="1"},20)}(),t.addEventListener("keyup",f,!1),t.addEventListener("scroll",g,!1),a.container.addEventListener("click",u,!1)},b.src=a.target.src}(this)},!1))}function l(e){var t,n,r=/^#([A-Fa-f0-9]{3}){1,2}$/.test(t=e)?(3===(n=t.substring(1).split("")).length&&(n=[n[0],n[0],n[1],n[1],n[2],n[2]]),"rgba("+[(n="0x"+n.join(""))>>16&255,n>>8&255,255&n].join(", ")+", 1)"):/(rgb\((?:\d{1,3}[,)] ?){3}(?:\d?\.\d+\))?)/.test(t)?t.replace(")",", 1)"):/(rgba\((?:\d{1,3}[,)] ?){3}(?:\d?\.\d+\))?)/.test(t)?t:o.background,i=/([\d.]+)\)$/g,a=i.exec(r)[1];return r.replace(i,.7*a+")")}function d(e,t){var n=r.head||r.getElementsByTagName("head")[0];r.getElementById(e)&&r.getElementById(e).remove();var i=r.createElement("style");i.id=e,i.styleSheet?i.styleSheet.cssText=t:i.appendChild(r.createTextNode(t)),n.appendChild(i)}function u(){c("beforeHide"),t.removeEventListener("keyup",f,!1),t.removeEventListener("scroll",g,!1),a.container.removeEventListener("click",u,!1),a.target.classList.remove("lightense-open"),a.wrap.style.transform="",a.target.style.transform="",a.target.classList.add("lightense-transitioning"),a.container.style.opacity="",setTimeout(function(){c("afterHide"),a.container.style.visibility="",a.container.style.backgroundColor="",a.wrap.parentNode.replaceChild(a.target,a.wrap),a.target.classList.remove("lightense-transitioning")},a.time)}function g(){Math.abs(a.scrollY-t.scrollY)>=a.offset&&u()}function f(e){e.preventDefault(),27===e.keyCode&&u()}return function(t){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e=function(e){switch(i(e)){case"undefined":throw"You need to pass an element!";case"string":return r.querySelectorAll(e);case"object":return e}}(t),a=n({},o,c),d("lightense-images-css","\n:root {\n  --lightense-z-index: ".concat(a.zIndex-1,";\n  --lightense-backdrop: ").concat(a.background,";\n  --lightense-backdrop-safari: ").concat(l(a.background),";\n  --lightense-duration: ").concat(a.time,"ms;\n  --lightense-timing-func: ").concat(a.cubicBezier,";\n}\n\n.lightense-backdrop {\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n  z-index: calc(var(--lightense-z-index) - 1);\n  padding: 0;\n  margin: 0;\n  transition: opacity var(--lightense-duration) ease;\n  cursor: zoom-out;\n  opacity: 0;\n  background-color: var(--lightense-backdrop);\n  visibility: hidden;\n}\n\n@supports (-webkit-backdrop-filter: blur(30px)) {\n  .lightense-backdrop {\n    background-color: var(--lightense-backdrop-safari);\n    -webkit-backdrop-filter: blur(30px);\n    backdrop-filter: blur(30px);\n  }\n}\n\n.lightense-wrap {\n  position: relative;\n  transition: transform var(--lightense-duration) var(--lightense-timing-func);\n  z-index: var(--lightense-z-index);\n  pointer-events: none;\n}\n\n.lightense-target {\n  cursor: zoom-in;\n  transition: transform var(--lightense-duration) var(--lightense-timing-func);\n  pointer-events: auto;\n}\n\n.lightense-open {\n  cursor: zoom-out;\n}\n\n.lightense-transitioning {\n  pointer-events: none;\n}")),r.querySelector(".lightense-backdrop")||(a.container=r.createElement("div"),a.container.className="lightense-backdrop",r.body.appendChild(a.container)),function(e){var t=e.length;if(t)for(var n=0;n<t;n++)s(e[n]);else s(e)}(e)}}();e.exports=o}])});